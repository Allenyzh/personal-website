---
export const prerender = true;
import { getCollection, render } from "astro:content";
import BaseLayout from "@/layouts/BaseLayout.astro";
import FormattedDate from "@/components/FormattedDate.astro";
import { Badge } from "@/components/ui/badge";

const experiences = await getCollection("experience");
const experience = experiences[0];

const { Content } = experience ? await render(experience) : { Content: null };
const title = experience?.data.title ?? "Experience";
const description =
  experience?.data.description ??
  "A timeline of my roles, responsibilities, and impact.";
const updated = experience?.data.updated;
---

<BaseLayout
  bodyClass="bg-background"
  title={title}
  specialDescription={description}
>
  <div class="container mx-auto px-4 py-8 max-w-6xl">
    <!-- Header Section -->
    <div class="text-center mb-12">
      <h1 class="text-4xl font-bold tracking-tight text-foreground mb-4">
        {title}
      </h1>
      <p class="text-xl text-muted-foreground max-w-2xl mx-auto">
        {description}
      </p>
      {
        updated && (
          <div class="mt-4 flex items-center justify-center gap-2 text-sm text-muted-foreground">
            <Badge variant="outline" className="text-xs">
              Updated
            </Badge>
            <FormattedDate date={updated} />
          </div>
        )
      }
    </div>

    {
      Content ? (
        <div class="max-w-4xl mx-auto">
          <div class="overflow-hidden p-6 md:p-8">
            <div class="prose prose-headings:text-article-primary prose-p:text-base/8 prose-p:tracking-wide prose-figcaption:text-xs prose-img:min-w-2xs prose-img:max-w-[21rem] prose-img:xs:min-w-xs prose-img:xs:max-w-sm prose-img:sm:min-w-sm prose-img:sm:max-w-lg prose-img:md:min-w-lg prose-img:md:max-w-3xl prose-h4:mb-12 max-w-none prose-code:rounded prose-code:text-sm prose-code:font-mono prose-code:text-gray-800 prose-pre:indent-0 prose-code:not-[pre>code]:bg-gray-200 prose-code:not-[pre>code]:px-2 prose-code:not-[pre>code]:py-1 prose-code:not-[pre>code]:mr-1 prose-code:not-[pre>code]:before:content-[''] prose-code:not-[pre>code]:after:content-[''] prose-code:not-[pre>code]:hover:bg-gray-300 prose-code:not-[pre>code]:transition-all prose-code:not-[pre>code]:duration-200 prose-code:not-[pre>code]:hover:cursor-default prose-a:text-[#42b883]">
              <Content />
            </div>
          </div>
        </div>
      ) : (
        <div class="text-center py-12">
          <div class="mx-auto max-w-md">
            <h3 class="text-lg font-semibold text-foreground mb-2">
              No experience yet
            </h3>
            <p class="text-muted-foreground">
              Add an entry in src/content/experience to get started.
            </p>
          </div>
        </div>
      )
    }
  </div>
</BaseLayout>
